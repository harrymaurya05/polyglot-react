# Quick Start: Incremental Auto-Translation

## ğŸ¯ Problem

Every time you build, you re-translate ALL texts, even unchanged ones.

- 100 texts Ã— 5 languages = 500 API calls **every time**
- Expensive ğŸ’¸
- Slow ğŸŒ
- Wasteful â™»ï¸

## âœ… Solution

Incremental translation: Only translate new or changed texts.

- First build: 100 texts Ã— 5 languages = 500 API calls
- Add 1 text: 1 text Ã— 5 languages = **5 API calls**
- **99% cost reduction!** ğŸ‰

## ğŸš€ Setup (2 minutes)

### Step 1: Update vite.config.ts

```typescript
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import { extractTranslatableText } from "i18nsolutions/plugin";
import { PolyglotAPIAdapter } from "i18nsolutions";

export default defineConfig({
  plugins: [
    react(),
    extractTranslatableText({
      include: ["src/**/*.{jsx,tsx}"],
      output: "src/translations/texts.json",

      // âš¡ Add this:
      autoTranslate: {
        enabled: true,
        adapter: new PolyglotAPIAdapter(import.meta.env.VITE_POLYGLOT_API_KEY),
        sourceLang: "en",
        targetLangs: ["es", "fr", "de", "hi", "ja"], // Your languages
      },
    }),
  ],
});
```

### Step 2: Add API Key

Create `.env`:

```bash
VITE_POLYGLOT_API_KEY=your-api-key-here
```

Get your API key: [usepolyglot.dev](https://usepolyglot.dev)

### Step 3: Run Dev Server

```bash
npm run dev
```

That's it! ğŸ‰

## ğŸ“Š What Happens

### First Build

```
ğŸ“„ Found 50 files to scan
âœ… Extracted 127 unique translatable texts
ğŸ’¾ Saved to src/translations/texts.json

ğŸŒ Auto-Translation Service
ğŸ“Š Change Detection:
  âœ¨ New texts: 127
  ğŸ”„ Changed texts: 0
  âœ… Unchanged texts: 0

ğŸ”„ Translating 127 texts...
  â†’ Translating to es... âœ…
  â†’ Translating to fr... âœ…
  â†’ Translating to de... âœ…
  (... 5 languages Ã— 127 texts = 635 API calls)

âœ… Auto-translation completed!
```

### Add New Component

```jsx
// New component with new text
function NewButton() {
  return <button>Cancel</button>;
}
```

Build again:

```
ğŸ“„ Found 51 files to scan
âœ… Extracted 128 unique translatable texts
ğŸ’¾ Saved to src/translations/texts.json

ğŸŒ Auto-Translation Service
ğŸ“Š Change Detection:
  âœ¨ New texts: 1        â† Only "Cancel" is new!
  ğŸ”„ Changed texts: 0
  âœ… Unchanged texts: 127

ğŸ”„ Translating 1 text...
  â†’ Translating to es... âœ…
  â†’ Translating to fr... âœ…
  (... 5 languages Ã— 1 text = 5 API calls)

âœ… Auto-translation completed!
```

**Saved 630 API calls!** ğŸ’°

## ğŸ¯ Use Cases

### Development

Enable during development for instant translations:

```typescript
autoTranslate: {
  enabled: process.env.NODE_ENV === "development",
  // ...
}
```

### Pre-deployment

Translate before deployment:

```json
{
  "scripts": {
    "prebuild": "node scripts/translate.js",
    "build": "vite build"
  }
}
```

### CI/CD Pipeline

```yaml
# .github/workflows/deploy.yml
- name: Translate
  env:
    POLYGLOT_API_KEY: ${{ secrets.POLYGLOT_API_KEY }}
  run: npm run translate
```

## ğŸ“ Generated Files

### texts.json (generated by plugin)

```json
["Welcome", "Login", "Sign Up", "Cancel", ...]
```

### .translation-store.json (auto-created)

```json
{
  "version": "1.0.0",
  "metadata": {
    "5d41402abc4b2a76b9719d911017c592": {
      "text": "Welcome",
      "lastTranslated": 1737849600000,
      "translations": {
        "es": "Bienvenido",
        "fr": "Bienvenue",
        "de": "Willkommen"
      }
    }
  }
}
```

### Should I commit .translation-store.json?

**âœ… Yes (Recommended)**

- Team shares translations
- CI/CD uses cached translations
- Faster builds

**âŒ No**

- Each developer re-translates
- Higher API costs
- Slower builds

## ğŸ”§ Configuration Options

### All Options

```typescript
autoTranslate: {
  enabled: true,              // Enable/disable
  adapter: ...,               // Translation provider
  sourceLang: "en",          // Source language
  targetLangs: ["es", "fr"], // Target languages
  storeFilePath: "...",      // Optional: custom path
}
```

### Supported Adapters

```typescript
// Polyglot API (Recommended)
new PolyglotAPIAdapter(apiKey);

// Google Translate
new GoogleTranslateAdapter(apiKey);

// DeepL
new DeepLAdapter(apiKey);

// AWS Translate
new AWSTranslateAdapter({
  accessKeyId: "...",
  secretAccessKey: "...",
  region: "us-east-1",
});
```

## ğŸ’¡ Pro Tips

### 1. Translate Multiple Languages

```typescript
targetLangs: ["es", "fr", "de", "hi", "ja", "zh", "ar", "pt", "ru", "ko"];
```

### 2. Custom Store Location

```typescript
storeFilePath: "translations/.store.json";
```

### 3. Verbose Logging

```typescript
verbose: true; // See detailed logs
```

### 4. Conditional Translation

```typescript
autoTranslate: {
  enabled: process.env.CI === "true", // Only in CI
  // ...
}
```

## ğŸ†˜ Troubleshooting

### API Key Error

```
âŒ Error: Invalid API key
```

**Fix**: Check `.env` file has correct key

### No Translations Generated

```
â„¹ï¸  No texts to translate
```

**Fix**: Make sure texts.json has content

### Rate Limit Error

```
âŒ Rate limit exceeded
```

**Fix**: System auto-retries. Wait or upgrade plan.

## ğŸ“š Full Documentation

- [Complete Guide](./INCREMENTAL-TRANSLATION.md) - 400+ lines
- [Implementation Summary](./INCREMENTAL-TRANSLATION-SUMMARY.md)
- [Example Config](./examples/basic-example/vite.config.auto-translate.example.ts)
- [Standalone Script](./scripts/translate.example.js)

## ğŸ’¬ Support

- GitHub: [github.com/polyglot/react](https://github.com/polyglot/react)
- Docs: [usepolyglot.dev](https://usepolyglot.dev)
- Discord: [Join Community](https://discord.gg/polyglot)

---

**Result**: 90-99% reduction in translation costs while maintaining perfect translations! ğŸ‰
